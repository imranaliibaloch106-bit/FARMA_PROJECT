{% extends "base.html" %}

{% block title %}Add Crop - SmartFarm Pro{% endblock %}

{% block content %}
<style>
    .form-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 1rem;
    }
    
    .form-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .form-header h1 {
        color: #2d4a2d;
        margin-bottom: 0.5rem;
    }
    
    .crop-form {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
        border: 2px solid #e8f5e8;
    }
    
    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }
    
    .form-section {
        background: #f8fff8;
        padding: 1.5rem;
        border-radius: 10px;
        border: 2px solid #e8f5e8;
    }
    
    .form-section h3 {
        color: #2d4a2d;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: #2d4a2d;
        font-weight: 500;
    }
    
    .form-control {
        width: 100%;
        padding: 10px;
        border: 2px solid #e8f5e8;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
        background: white;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #4caf50;
    }
    
    select.form-control {
        cursor: pointer;
    }
    
    textarea.form-control {
        resize: vertical;
        min-height: 80px;
    }
    
    .input-with-symbol {
        position: relative;
    }
    
    .input-symbol {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        color: #4caf50;
        font-weight: bold;
    }
    
    .input-with-symbol .form-control {
        padding-left: 25px;
    }
    
    .yield-preview {
        background: #e8f5e8;
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
    }
    
    .yield-preview h4 {
        color: #2d4a2d;
        margin-bottom: 0.5rem;
    }
    
    .revenue-calc {
        font-size: 1.1rem;
        font-weight: 500;
    }
    
    .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        padding-top: 2rem;
        border-top: 2px solid #e8f5e8;
    }
    
    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .btn-primary {
        background: #4caf50;
        color: white;
    }
    
    .btn-outline {
        background: transparent;
        color: #4caf50;
        border: 2px solid #4caf50;
    }
    
    .btn:hover {
        transform: translateY(-2px);
    }
    
    .btn-primary:hover {
        background: #45a049;
    }
    
    .btn-outline:hover {
        background: #4caf50;
        color: white;
    }
    
    .quick-tips {
        background: white;
        margin-top: 2rem;
        padding: 2rem;
        border-radius: 15px;
        border: 2px solid #e8f5e8;
    }
    
    .tips-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-top: 1rem;
    }
    
    .tip-card {
        background: #f8fff8;
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #e8f5e8;
    }
    
    .tip-card i {
        font-size: 2rem;
        color: #4caf50;
        margin-bottom: 1rem;
    }
    
    .tip-card h4 {
        color: #2d4a2d;
        margin-bottom: 0.5rem;
    }
</style>

<div class="form-container">
    <div class="form-header">
        <h1>‚ûï Add New Crop</h1>
        <p>Add a new crop to your farm management system</p>
    </div>

    <form method="POST" class="crop-form">
        <div class="form-grid">
            <!-- Basic Information -->
            <div class="form-section">
                <h3>‚ÑπÔ∏è Basic Information</h3>
                
                <div class="form-group">
                    <label for="crop_name">Crop Name *</label>
                    <input type="text" id="crop_name" name="crop_name" class="form-control" required 
                           placeholder="e.g., Wheat, Rice, Corn">
                </div>

                <div class="form-group">
                    <label for="crop_type">Crop Type *</label>
                    <select id="crop_type" name="crop_type" class="form-control" required>
                        <option value="">Select Crop Type</option>
                        <option value="Cereal">Cereal (Wheat, Rice, Corn)</option>
                        <option value="Vegetable">Vegetable</option>
                        <option value="Fruit">Fruit</option>
                        <option value="Pulse">Pulse (Beans, Lentils)</option>
                        <option value="Oilseed">Oilseed</option>
                        <option value="Commercial">Commercial Crop</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" class="form-control" 
                              placeholder="Additional details about this crop..."></textarea>
                </div>
            </div>

            <!-- Planting Details -->
            <div class="form-section">
                <h3>üå± Planting Details</h3>
                
                <div class="form-group">
                    <label for="area">Area (acres) *</label>
                    <input type="number" id="area" name="area" class="form-control" 
                           step="0.1" min="0.1" required placeholder="e.g., 5.5">
                </div>

                <div class="form-group">
                    <label for="season">Season *</label>
                    <select id="season" name="season" class="form-control" required>
                        <option value="">Select Season</option>
                        <option value="Spring">Spring</option>
                        <option value="Summer">Summer</option>
                        <option value="Monsoon">Monsoon</option>
                        <option value="Autumn">Autumn</option>
                        <option value="Winter">Winter</option>
                        <option value="Year-round">Year-round</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="status">Current Status</label>
                    <select id="status" name="status" class="form-control">
                        <option value="Planted">Planted</option>
                        <option value="Growing">Growing</option>
                        <option value="Flowering">Flowering</option>
                        <option value="Harvesting">Harvesting</option>
                        <option value="Harvested">Harvested</option>
                        <option value="Dormant">Dormant</option>
                    </select>
                </div>
            </div>

            <!-- Yield & Economic Details -->
            <div class="form-section">
                <h3>üí∞ Yield & Economics</h3>
                
                <div class="form-group">
                    <label for="expected_yield">Expected Yield (kg) *</label>
                    <input type="number" id="expected_yield" name="expected_yield" class="form-control" 
                           step="0.1" min="0" required placeholder="e.g., 1000">
                </div>

                <div class="form-group">
                    <label for="price">Expected Price (per kg) *</label>
                    <div class="input-with-symbol">
                        <span class="input-symbol">$</span>
                        <input type="number" id="price" name="price" class="form-control" 
                               step="0.01" min="0" required placeholder="0.00">
                    </div>
                </div>

                <div class="yield-preview">
                    <h4>Estimated Revenue</h4>
                    <div class="revenue-calc">
                        <span id="yieldDisplay">0</span> kg √ó $<span id="priceDisplay">0</span> = 
                        <strong>$<span id="revenueDisplay">0</span></strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                üíæ Save Crop
            </button>
            <a href="/dashboard" class="btn btn-outline">
                ‚ùå Cancel
            </a>
        </div>
    </form>

    <!-- Quick Tips -->
    <div class="quick-tips">
        <h3>üí° Quick Tips</h3>
        <div class="tips-grid">
            <div class="tip-card">
                <div>üìè</div>
                <h4>Accurate Area</h4>
                <p>Measure your field accurately for better yield predictions</p>
            </div>
            <div class="tip-card">
                <div>üå§Ô∏è</div>
                <h4>Season Selection</h4>
                <p>Choose the correct season for optimal growth conditions</p>
            </div>
            <div class="tip-card">
                <div>üí∞</div>
                <h4>Market Research</h4>
                <p>Research current market prices for accurate revenue estimates</p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const yieldInput = document.getElementById('expected_yield');
    const priceInput = document.getElementById('price');
    const yieldDisplay = document.getElementById('yieldDisplay');
    const priceDisplay = document.getElementById('priceDisplay');
    const revenueDisplay = document.getElementById('revenueDisplay');

    function calculateRevenue() {
        const yield = parseFloat(yieldInput.value) || 0;
        const price = parseFloat(priceInput.value) || 0;
        const revenue = yield * price;
        
        yieldDisplay.textContent = yield.toLocaleString();
        priceDisplay.textContent = price.toLocaleString();
        revenueDisplay.textContent = revenue.toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        });
    }

    yieldInput.addEventListener('input', calculateRevenue);
    priceInput.addEventListener('input', calculateRevenue);
    
    // Initial calculation
    calculateRevenue();
});
</script>
{% endblock %}